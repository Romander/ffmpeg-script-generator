(this["webpackJsonpffmpeg-script-generator"]=this["webpackJsonpffmpeg-script-generator"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(8),o=n.n(c),s=(n(13),n(14),n(3)),r=n(2),l=n(24),d=(n(15),n(0));function u(e){var t=i.a.useRef(null),n=i.a.useRef(null);return Object(d.jsxs)("div",{className:"add-input-param",children:[Object(d.jsxs)("div",{children:["name:",Object(d.jsx)("input",{ref:t})]}),Object(d.jsxs)("div",{children:["duration:",Object(d.jsx)("input",{ref:n}),"(seconds, float)"]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){var a,i,c;return e.onAddInput({id:Object(l.a)(),name:null===(a=t.current)||void 0===a?void 0:a.value,duration:Number.parseFloat(null!==(i=null===(c=n.current)||void 0===c?void 0:c.value)&&void 0!==i?i:"")})},children:"+"})})]})}n(17);function j(e){var t=i.a.useRef(null);return Object(d.jsxs)("div",{className:"checkbox",children:[Object(d.jsx)("input",{type:"checkbox",ref:t,onChange:function(){return e.onChange(!0)}}),Object(d.jsx)("div",{children:e.title})]})}var f=n(5);n(18);function v(e){var t,n,a=e.onChangeInput,c=e.onDeleteInput,o=i.a.useCallback((function(t){a(Object(f.a)(Object(f.a)({},e.inputParam),{},{name:t.target.value}))}),[a,e.inputParam]),s=i.a.useCallback((function(t){a(Object(f.a)(Object(f.a)({},e.inputParam),{},{duration:Number.parseFloat(t.target.value)}))}),[e.inputParam,a]),r=i.a.useCallback((function(){var t,n;c(null!==(t=null===(n=e.inputParam)||void 0===n?void 0:n.id)&&void 0!==t?t:null)}),[e.inputParam,c]);return Object(d.jsxs)("div",{className:"edit-input-param",children:[Object(d.jsxs)("div",{children:["name:",Object(d.jsx)("input",{defaultValue:null===(t=e.inputParam)||void 0===t?void 0:t.name,onChange:o})]}),Object(d.jsxs)("div",{children:["duration:",Object(d.jsx)("input",{defaultValue:null===(n=e.inputParam)||void 0===n?void 0:n.duration,onChange:s}),"(seconds, float)"]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:r,children:"-"})})]})}n(19);function b(e){return Object(d.jsxs)("div",{className:"input",children:[Object(d.jsx)("input",{defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)}}),Object(d.jsx)("div",{children:e.title})]})}n(20);function p(e){return Object(d.jsx)("div",{className:"script-visualizer-view",children:e.children})}function m(e){var t,n,a,i;return Object(d.jsxs)(p,{children:[Object(d.jsx)("div",{children:"ffmpeg \\"}),Object(d.jsx)("div",{children:"-vsync 0 \\"}),e.enableNvideaDecode&&Object(d.jsx)("div",{children:"-c:v h264_cuvid \\"}),e.inputs.map((function(e){return Object(d.jsxs)("div",{children:['-i "',e.name,'" \\']})})),Object(d.jsxs)("div",{children:["-filter_complex \\",null===(t=e.filterComplexVideosSettings)||void 0===t?void 0:t.map((function(e,t){return Object(d.jsxs)("div",{children:[0===t?'"':null,e," \\"]})})),null===(n=e.filterComplexAudiosSettings)||void 0===n?void 0:n.map((function(e){return Object(d.jsxs)("div",{children:[e," \\"]})}))]}),Object(d.jsxs)("div",{children:[null===(a=e.xfades)||void 0===a?void 0:a.map((function(t,n){var a,i;return Object(d.jsxs)("div",{children:[t,(null===(a=e.xfades)||void 0===a?void 0:a.length)&&n===(null===(i=e.xfades)||void 0===i?void 0:i.length)-1?";":null,"\\"]})})),null===(i=e.acrossfades)||void 0===i?void 0:i.map((function(t,n){var a,i;return Object(d.jsxs)("div",{children:[t,(null===(a=e.acrossfades)||void 0===a?void 0:a.length)&&n===(null===(i=e.acrossfades)||void 0===i?void 0:i.length)-1?'"':null,"\\"]})}))]}),e.enableNvideaEncode&&Object(d.jsx)("div",{children:"-c:v h264_nvenc \\"}),Object(d.jsx)("div",{children:"-b:v 10M \\"}),Object(d.jsxs)("div",{children:[e.mapping,' "',e.outputFilename,'" \\']})]})}n(21);var x=function(){var e=i.a.useState(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],c=i.a.useState(!1),o=Object(r.a)(c,2),l=o[0],f=o[1],x=i.a.useState(!1),h=Object(r.a)(x,2),O=h[0],g=h[1],C=i.a.useState(1),N=Object(r.a)(C,2),S=N[0],k=N[1],F=i.a.useState([]),I=Object(r.a)(F,2),y=I[0],P=I[1],A=i.a.useState("out.mp4"),V=Object(r.a)(A,2),E=V[0],w=V[1],D=i.a.useCallback((function(e){e&&P((function(t){return[].concat(Object(s.a)(t),[e])}))}),[]),G=i.a.useCallback((function(e){e&&P((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),T=i.a.useCallback((function(e){e&&(console.log(e),P((function(t){return console.log(t),console.log(t.map((function(t){return t.id===e.id?e:t}))),t.map((function(t){return t.id===e.id?e:t}))})))}),[]),B=i.a.useCallback((function(e){e&&Number.parseFloat(e)&&k(Number.parseFloat(e))}),[]),L=i.a.useCallback((function(e){e&&w(e)}),[]),M=i.a.useCallback((function(){a((function(e){return!e}))}),[]),R=i.a.useCallback((function(){f((function(e){return!e}))}),[]),_=i.a.useCallback((function(){g((function(e){return!e}))}),[]),J=function(e,t,n,a){return"".concat(0===e?"[".concat(e,":v]"):"[v".concat(e,"]"),"[").concat(e+1,":v]xfade=transition=fade:duration=").concat(a,":offset=").concat(n).concat(e+1===t-1?",format=yuv420p[video]":"[v".concat(e+1,"];"))},z=function(e){return"[".concat(e,"]settb=AVTB[").concat(e,":v];")},q=function(e,t,n){return"".concat(0===e?"[".concat(e,":a]"):"[a".concat(e,"]"),"[").concat(e+1,":a]acrossfade=d=").concat(n,":c1=tri:c2=tri").concat(e+1===t-1?"[audio]":"[a".concat(e+1,"];"))},H=function(e,t){return"[".concat(e,"]atrim=0:").concat(t,"[").concat(e,":a];")},K=function(e){for(var t=0,n=[],a=[],i=[],c=[],o=0;o<y.length;o++){var r;if(a=[].concat(Object(s.a)(a),[H(o,null!==(r=y[o].duration)&&void 0!==r?r:0)]),n=[].concat(Object(s.a)(n),[z(o)]),o<y.length-1){var l;c=[].concat(Object(s.a)(c),[q(o,y.length,e)]);var d=+((null!==(l=y[o].duration)&&void 0!==l?l:0)+t-e).toFixed(3);t=d,i=[].concat(Object(s.a)(i),[J(o,y.length,d,e)])}}return{filterComplexVideosSettings:n,filterComplexAudiosSettings:a,xfades:i,acrossfades:c}}(S);return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)("div",{className:"layout",children:[Object(d.jsx)("div",{className:"title",children:"Generate FFmpeg script"}),Object(d.jsx)("div",{className:"title-message",children:"Generator FFmpeg CLI command for concatenation several videos into single one using filter complex xfade and acrossfade."}),Object(d.jsx)("div",{className:"group-title",children:"Add inputs"}),Object(d.jsxs)("div",{className:"inputs-container",children:[Object(d.jsx)("div",{className:"text",children:'Input files will be generated into the format -i "name" in result script, duration should be specified to generate correct xfade offset and atrim for audio.'}),Object(d.jsx)(u,{onAddInput:D}),y.map((function(e){return Object(d.jsx)(v,{inputParam:e,onChangeInput:T,onDeleteInput:G},e.id)}))]}),Object(d.jsx)("div",{className:"group-title",children:"Modify params"}),Object(d.jsxs)("div",{className:"params-container",children:[Object(d.jsx)("div",{className:"text",children:"Change duration and output filename."}),Object(d.jsx)(b,{value:S.toString(),title:"Transition duration (seconds, float)",onChange:B}),Object(d.jsx)(b,{value:E,title:"Output filename",onChange:L})]}),Object(d.jsx)("div",{className:"group-title",children:"Check some features"}),Object(d.jsxs)("div",{className:"checkboxes-container",children:[Object(d.jsx)("div",{className:"text",children:'If your ffmepg has nvidea feature it would be better turned on this checkboxes (Enable nvidea decoder, Enable nvidea encoder) for the performance boost. "Generate audio and video scripts separately" if you have a lot of videos I recommend to use separate generation video and audio because of better performance.'}),Object(d.jsx)(j,{title:"Enable nvidea decoder (using gpu)",onChange:M}),Object(d.jsx)(j,{title:"Enable nvidea encoder (using gpu)",onChange:R}),Object(d.jsx)(j,{title:"Generate audio and video scripts separately? (separate scripts more effective)",onChange:_})]}),O?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{enableNvideaDecode:n,enableNvideaEncode:l,inputs:y,filterComplexVideosSettings:K.filterComplexVideosSettings,xfades:K.xfades,mapping:'-map "[video]"',outputFilename:"out.mp4"}),Object(d.jsx)(m,{enableNvideaDecode:n,enableNvideaEncode:l,inputs:y,filterComplexAudiosSettings:K.filterComplexAudiosSettings,acrossfades:K.acrossfades,mapping:'-map "[audio]"',outputFilename:"out.wav"}),Object(d.jsxs)(p,{children:['ffmpeg -i "out.mp4" -i "out.wav"-c:v copy -c:a aac'," ",E]})]}):Object(d.jsx)(m,{enableNvideaDecode:n,enableNvideaEncode:l,inputs:y,filterComplexVideosSettings:K.filterComplexVideosSettings,filterComplexAudiosSettings:K.filterComplexAudiosSettings,xfades:K.xfades,acrossfades:K.acrossfades,mapping:'-map "[audio]" -map "[video]"',outputFilename:E})]})})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root")),h()}],[[22,1,2]]]);
//# sourceMappingURL=main.621e794c.chunk.js.map